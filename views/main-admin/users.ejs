<% include header.ejs %>
  <div id="admin-content">
      <div class="container">
          <div class="row">
              <div class="col-md-10">
                  <h1 class="admin-heading">All Users</h1>
              </div>
              <!-- <div class="col-md-2">
                  <a class="add-new" href="add-user.php">add user</a>
              </div> -->
              <div class="col-md-12">
                  <% if(users.length > 0){ %> 
                    <table class="content-table">
                        <thead>
                            <th>S.No.</th>
                            <th>Full Name</th>
                            <th>User Name</th>
                            <th>Total Posts</th>
                            <!-- <th>Edit</th>
                            <th>Delete</th> -->
                        </thead>
                        <tbody>
                            <% var count = (currentPage - 1) * perPage + 1; %>
                            <% users.forEach(function(user, index){ %>
                            <tr>
                                <td class='id'><%= count + index %></td>
                                <td><%= user.fname + user.lname %></td>
                                <td><%= user.username %></td>
                                <td><%= user.posts.length %></td>
                                <!-- <td class='edit'><a href='update-user.php'><i class='fa fa-edit'></i></a></td>
                                <td class='delete'><a href='delete-user.php'><i class='fa fa-trash-o'></i></a></td> -->
                            </tr>
                            <% }) %>
                        </tbody>
                    </table>
                    <%}else{%> 
                        <h3>No user found</h3>
                        <%} %>
                        <ul class='pagination admin-pagination'>
                    
                            <% for (let i = 1; i <= runLoop; i++) { %>
                                <% var active = '' %>
                                <% if(currentPage == i){active = 'active'}else{active = ''} %>
                                <li class="<%= active %>"><a href="/admin/user?page=<%= i %>"><%= i %></a></li>
                                
                            <% } %>
                              
                              <!-- <li><a href="/admin/post?page=2">2</a></li>
                              <li><a href="/admin/post?page=3">3</a></li> -->
                          </ul>
              </div>
          </div>
      </div>
  </div>
  <% include footer.ejs %>
